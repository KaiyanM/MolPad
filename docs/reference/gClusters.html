<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="gClusters() returns the clusters generated by k-means and yield
an elbow plot as a way of finding the optimal parameter."><title>Generate clusters — gClusters • MolPad</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate clusters — gClusters"><meta property="og:description" content="gClusters() returns the clusters generated by k-means and yield
an elbow plot as a way of finding the optimal parameter."><meta property="og:image" content="https://kaiyanm.github.io/MolPad/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">MolPad</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/whymolpad.html">Why MolPad?</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/getstarted.html">Get started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/cheese.html">Case study</a>
    <a class="dropdown-item" href="../articles/FAQ.html">FAQs</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generate clusters</h1>
      
      <div class="d-none name"><code>gClusters.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>gClusters()</code> returns the clusters generated by k-means and yield
an elbow plot as a way of finding the optimal parameter.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gClusters</span><span class="op">(</span><span class="va">data</span>, ncluster <span class="op">=</span> <span class="fl">20</span>, elbow.max <span class="op">=</span> <span class="fl">50</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A scaled data.frame that contain variables <code>ID</code>, <code>value on time_1</code>, ..., <code>value on time_k</code>, and <code>type</code> for extracting patterns across the time. See also <code><a href="pre_process.html">pre_process()</a></code>.</p></dd>


<dt>ncluster</dt>
<dd><p>A number of clusters. It is related to the complexity of information in the network: When choosing the <code>ncluster</code>, we suggest thinking about how many nodes you are about to show on the visualization and how representative you want for each clustered pattern.</p></dd>


<dt>elbow.max</dt>
<dd><p>A number of the maximum value of x-axis for the elbow method plot. It should be larger than the expected <code>ncluster</code> and smaller than the sample size.</p></dd>


<dt>iter.max</dt>
<dd><p>A number of the maximum iterations allowed in k-means. See also <code><a href="https://rdrr.io/r/stats/kmeans.html" class="external-link">stats::kmeans</a></code>.</p></dd>


<dt>nstart</dt>
<dd><p>A number of random attempts of generating initial configurations. The k-means algorithm will choose the best one among these
attempts. For larger data, 'nstart' can be set lower or just set to 1. See also <code><a href="https://rdrr.io/r/stats/kmeans.html" class="external-link">stats::kmeans</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>This function return a list of 2 elements: a k-means cluster result and an elbow method plot.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>To determine the optimal number of clusters (<code>ncluster</code>), it is advised to closely examine the elbow plot and identify the point on the graph where a substantial change or 'elbow' occurs. This is often indicative of the most suitable cluster count.
In cases where your dataset is extensive or intricate, you might consider increasing the value of <code>elbow.max</code> to ensure a more comprehensive exploration of potential cluster counts. This can help in achieving more accurate and meaningful results, especially when working with larger or more complex datasets. This function can be executed with only the <code>data</code> parameter at the outset. However, to achieve the best clustering results, further adjustments are recommended. After the initial run, users are expected to adjust the function's parameters based on the clustering outcomes and the elbow plot analysis.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">test_data</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">reslist</span> <span class="op">&lt;-</span> <span class="fu">gClusters</span><span class="op">(</span><span class="va">test_data_processed</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># k-means result</span></span></span>
<span class="r-in"><span><span class="va">reslist</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> K-means clustering with 20 clusters of sizes 3, 5, 10, 6, 6, 3, 5, 1, 5, 2, 4, 8, 6, 6, 3, 9, 4, 4, 4, 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cluster means:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             T1          T2          T3         T4         T5         T6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   0.89463785  0.01698143 -0.57023879 -1.1815834 -1.1815834  1.1882480</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  -0.81355388 -0.84696982 -0.32573017  1.1218534  2.0955812 -0.5620731</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  -0.19020083 -0.69654961 -0.66836949 -0.4657663 -0.3851487 -0.5590421</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   2.09193480 -0.33320285 -0.50786563 -0.5579659 -0.5579659  1.5455977</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   2.56190160  0.25477673 -0.37215648 -0.2122542 -0.3827206  0.1759197</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  -0.09187847 -0.87257293 -0.87257293 -0.8725729 -0.5696817  2.0566833</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   1.21072292 -0.80608521 -0.80608521  1.0953706  0.5441275  1.2235684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  -0.22485951 -1.12429753  1.57401655  0.2248595  0.6745785  0.6745785</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   0.65431739 -0.06991189  0.32724119  0.2386101  1.1603437  1.4951461</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 -0.27847690 -0.82258408 -0.82258408 -0.8225841  1.2338761 -0.8225841</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  1.56599593 -0.49119311 -0.83000857 -0.6160199 -0.2092753  1.1915157</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12  0.11559709 -0.19000668 -0.25629794 -0.1487697 -0.4383348  2.5830148</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13  1.03050384 -0.62595927  0.30371539  1.0821972  1.2374965 -1.0856661</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  0.80396722  0.07346897 -0.82246179 -0.6884003 -0.4999813 -0.7273667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15  0.06782472 -0.71014462 -0.28353947 -0.6475037 -0.8105857  1.0715170</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16  2.34578310 -0.05646618 -0.66925519 -0.3111878 -0.5704606 -0.6594499</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17  1.45173820  0.26236463  1.31600581 -0.2531012  0.2004547 -1.1238942</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18  0.33814100  1.48152270  0.43414431  0.7473132  0.8107827 -0.5234016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 -0.12255061 -0.44139873 -0.19548572  1.0299038  2.3840629 -0.2147528</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 -0.38022191 -0.36840199  0.02254271  1.6459653  1.9633618 -0.3246455</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              T7           T8           T9         T10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   0.894637851 -0.836550610  0.413436879  0.36201421</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  -0.651292750 -0.498839228  0.424460133  0.05656427</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  -0.566522777  0.002653353  1.739179823  1.78976662</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  -0.425513174 -0.557965933 -0.305714801 -0.39133827</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  -0.461577609 -0.521296398 -0.521296398 -0.52129640</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   0.882337606  0.086536293  0.126860853  0.12686085</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  -0.453071656 -0.749390535 -0.749390535 -0.50976633</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  -1.574016547  0.224859507  0.674578520 -1.12429753</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  -0.892735465 -0.964398012 -0.912552514 -1.03606056</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 -0.822584085  1.233876127  1.233876127  0.68976894</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11  0.774154665  0.196302112 -0.626636270 -0.95483532</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 -0.006327004 -0.327677972 -0.665598891 -0.66559889</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 -1.182978501 -0.350257808 -0.288247050 -0.12080420</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 -0.745878993 -0.092802077  0.789767221  1.90968781</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 -0.973667763 -0.383980588  1.071516974  1.59856325</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 -0.548492772  0.074188677  0.007170609  0.38817011</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 -0.987867401 -0.340013670 -0.330856838 -0.19483004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 -1.000948275 -0.369116018 -0.959219004 -0.95921900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 -0.400726188 -0.616324716 -0.711364008 -0.71136401</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 -0.647007074 -0.667438225 -0.632293128 -0.61186198</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Clustering vector:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19  20 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3   4  10  18   9   3   6   5  20   2  13  14  14  16  13   2  12   3  17  16 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36  37  38  39  40 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  11   3  12   4   5   2   7  16  12  19  11  19  18  10  20   9  13  14   3  18 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  41  42  43  44  45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  12   4   3   3   7   3  12   9   4  12  16  11   1  14  12  11   6  20  16  20 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  61  62  63  64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  13   9   7  14   8   4   5   7  17  17  15   2  12   5  14  20  18  19  13   7 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  81  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  13  15  16   6  15   4  17   5   1  16  20   1  19  16   3   9   2   5   3  16 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Within cluster sum of squares by cluster:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  5.6033175  3.4617088  8.0515257  3.0260293  5.8948215  4.0041862</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7]  8.2663203  0.0000000  5.9394323  0.9921913  7.3290085  8.0412334</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] 11.7178543  9.4996169  4.1616532 15.5879788  9.9418120  8.1365152</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19]  1.6353685  2.4693324</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  (between_SS / total_SS =  84.1 %)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Available components:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "cluster"      "centers"      "totss"        "withinss"     "tot.withinss"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6] "betweenss"    "size"         "iter"         "ifault"      </span>
<span class="r-in"><span><span class="co"># elbow plot</span></span></span>
<span class="r-in"><span><span class="va">reslist</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-plt img"><img src="gClusters-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Kaiyan Ma.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

